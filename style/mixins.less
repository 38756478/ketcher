@import 'lesshat';

.text-hide(transparent) {
	font: ~"0/0" a;
	color: transparent;
	text-shadow: none;
	background-color: transparent;
	border: 0;
}

.text-hide(indent) {
	@approximate_em_value: 12px / 1em;
	@wider_than_any_screen: -9999em;
	text-indent: @wider_than_any_screen * @approximate_em_value;
	overflow: hidden;
	text-align: left;
}

.text-hide() {
	.text-hide(indent);
}

.remove-inline-spacing() {
	// vanish horizontal spacing between inline blocks
	font-size: 0.00001px;
	-webkit-text-size-adjust: none;
}

// Effects

.scale-highlight() {
	.transition(transform, 0.2s, ease-out);
	.scale(1.25);
}

.scale-highlight(none) {
	.scale(1);
}

.shadow-highlight(@color: @active-color, inset) {
	.box-shadow(0px -1px 6px fade(@color, 5%) inset, 0px 1px 3px @color inset);
}

.shadow-highlight(@color: @active-color) when (iscolor(@color)) {
	.box-shadow(inset 0 0 1px 1px fade(@color, 12%));
}

.circle-highlight(@color: @active-color, @inset: '') {
	.border-radius((@icon-size + @icon-padding) / 2);
	.box-shadow(~'0 0 4px @{color} @{inset}');
}

.symbol-highlight(@color: @active-color) {
	color: @active-color;
	text-shadow: 1px 1px 3px @color;
}

.symbol-invert-highlight() {
	background: #333;
	text-shadow: 0px 1px 10px white, 0px -1px 10px white;
}

.invert-highlight() {
	background: #444;
	color: white;
}

.invert-highlight(none) {
	background: inherit;
	color: @disabled-color;	// hint for menus
}


////////////

.control() {
	.border-radius(4px);

	&[disabled] {
		color: @disabled-color;
	}
	&:active, &:focus {
		outline: 0;
	}
}

////////////

.orientation(horizontal) {
	@main-rise: right;
	@main-lose: left;
	@main-dim: width;
	@cross-rise: bottom;
	@cross-lose: top;
	@cross-dim: height;
}

.orientation(vertical) {
	@main-rise: bottom;
	@main-lose: top;
	@main-dim: height;
	@cross-rise: right;
	@cross-lose: left;
	@cross-dim: width;
}

.direction(@direction) {
	.to-index(top) { @index: 0; }
	.to-index(right) { @index: 1; }
	.to-index(bottom) { @index: 2; }
	.to-index(left) { @index: 3; }
	@directions: top right bottom left;
	.to-index(@direction);

	@main-start: extract(@directions, mod(@index, 4) + 1);
	@main-end: extract(@directions, mod((@index + 2), 4) + 1);

	@cross-start: extract(@directions, mod((@index + 3), 4) + 1);
	@cross-end: extract(@directions, mod((@index + 1), 4) + 1);

	@orientation: extract(horizontal vertical, mod(@index + 1, 2) + 1);
	.orientation(@orientation);
}

.toolbar-pos(@direction) {
	.direction(@direction);
	position: absolute;
	@{main-start}: @app-gap;
	@{cross-start}: @canvas-padding;
	@{cross-end}: @canvas-padding;
	@{main-dim}: @toolbar-size;

	&>menu {
		@{cross-dim}: 100%;
	}
}

.separator(@orientation, @lose-pad, @rise-pad) {
	.orientation(@orientation);
	margin-@{main-lose}: @lose-pad;
	border-@{main-lose}: 1px solid @border-color;
	padding-@{main-lose}: @rise-pad - 1px; // substract 1px to assert
	                                       // width = lose-pad + rise-pad
}

.separate-item(@orientation, @lose-pad, @rise-pad: @lose-pad) {
	& + li {
		.separator(@orientation, @lose-pad, @rise-pad);
	}
}

.separate-menu(@orientation, @lose-pad, @rise-pad: @lose-pad) {
	li + li>menu {
		.separator(@orientation, @lose-pad, @rise-pad);
	}
}

////////////

.colorize(@color) when not (@color = inherit) {
	color: @color;
}

.monochrome-icons(@names, @color: inherit, @i: 1) when (@i <= length(@names)) {
	@item: extract(@names, @i);
	@icon: 'icon-@{item}';
	#@{item} button:before { content: @@icon; .colorize(@color); }
	.monochrome-icons(@names, @color, (@i + 1));
}

.twocolor-icons(@names, @color-A: inherit, @color-B: inherit, @i: 1) when (@i <= length(@names)) {
	@item: extract(@names, @i);
	@icon-A: 'icon-@{item}-A';
	@icon-B: 'icon-@{item}-B';
	#@{item} button:before { content: @@icon-A; .colorize(@color-A); }
	#@{item} button:after { content: @@icon-B; .colorize(@color-B); }
	.twocolor-icons(@names, @color-A, @color-B, (@i + 1));
}

.sketching-atom-icons(@names, @i: 1) when (@i <= length(@names)) {
	@item: extract(@names, @i);
	@color: 'atom-sketching-@{item}-color';
	button.@{item} {
		color: @@color;
	}
	.sketching-atom-icons(@names, (@i + 1));
}
